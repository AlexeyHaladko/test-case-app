import{A as e,D as t,F as n,L as r,S as i,T as a,_ as o,a as s,b as c,c as l,d as u,f as d,g as f,h as p,i as m,l as h,o as g,p as _,r as v,s as y,u as b}from"./mui-6TiAU9Pq.js";import"./vendor-xQZBn1hS.js";import{r as x}from"./tanstack-a0KEQ1Fg.js";import{a as S,c as C,i as w,r as T}from"./index-j4dQcPbk.js";import{n as E}from"./generated.schemas-CmnXDYcV.js";var D=r();function O(e){let t=C();return x({queryKey:[w.getTableData,e],queryFn:()=>S(T.getTableData,{params:e}),staleTime:0,retry:!1,enabled:!!t})}var k=O,A=n(),j=[{field:`id`,headerName:`ID`,sortable:!0},{field:`crop_name`,headerName:`Crop`,sortable:!0},{field:`variety`,headerName:`Variety`,sortable:!0},{field:`region`,headerName:`Region`,sortable:!0},{field:`country`,headerName:`Country`,sortable:!0},{field:`status`,headerName:`Status`,sortable:!0},{field:`planting_date`,headerName:`Planting Date`,sortable:!0},{field:`yield_amount`,headerName:`Yield (kg/ha)`,sortable:!0}];function M(){let[n,r]=(0,D.useState)({page:1,page_size:10}),{data:i}=k(n),x=(e,t)=>{r(e=>({...e,page:t+1}))},S=e=>{r(t=>({...t,page_size:parseInt(e.target.value,10),page:1}))},C=e=>{n.ordering===e?r(t=>({...t,ordering:`_${e}`})):r(t=>({...t,ordering:e}))},w=e=>t=>{r(n=>({...n,[e]:t.target.value,page:1}))};return(0,A.jsx)(a,{sx:{width:`100%`},children:(0,A.jsxs)(e,{sx:{width:`100%`,mb:2,p:2},children:[(0,A.jsxs)(_,{direction:`row`,spacing:2,sx:{mb:2},children:[(0,A.jsx)(v,{label:`Filter by Crop`,variant:`outlined`,size:`small`,value:n.crop_name||``,onChange:w(`crop_name`)}),(0,A.jsx)(v,{label:`Filter by Country`,variant:`outlined`,size:`small`,value:n.country||``,onChange:w(`country`)}),(0,A.jsxs)(c,{size:`small`,sx:{minWidth:150},children:[(0,A.jsx)(o,{children:`Status`}),(0,A.jsxs)(p,{value:n.status||``,label:`Status`,onChange:e=>{r(t=>({...t,status:e.target.value,page:1}))},children:[(0,A.jsx)(f,{value:``,children:(0,A.jsx)(`em`,{children:`None`})}),Object.values(E).map(e=>(0,A.jsx)(f,{value:e,children:e},e))]})]})]}),(0,A.jsx)(y,{sx:{pl:{sm:2},pr:{xs:1,sm:1}},children:(0,A.jsx)(t,{sx:{flex:`1 1 100%`},variant:`h6`,id:`tableTitle`,component:`div`,children:`Table`})}),(0,A.jsx)(h,{children:(0,A.jsxs)(d,{children:[(0,A.jsx)(l,{children:(0,A.jsx)(s,{children:j.map(e=>(0,A.jsx)(b,{children:(0,A.jsx)(m,{active:n.ordering?.includes(e.field),direction:n.ordering===e.field?`asc`:`desc`,onClick:()=>C(e.field),children:e.headerName})},e.field))})}),(0,A.jsx)(u,{children:i?.results.map(e=>(0,A.jsxs)(s,{children:[(0,A.jsx)(b,{children:e.id}),(0,A.jsx)(b,{children:e.crop_name}),(0,A.jsx)(b,{children:e.variety}),(0,A.jsx)(b,{children:e.region}),(0,A.jsx)(b,{children:e.country}),(0,A.jsx)(b,{children:e.status}),(0,A.jsx)(b,{children:e.planting_date}),(0,A.jsx)(b,{children:e.yield_amount})]},e.id))})]})}),(0,A.jsx)(g,{rowsPerPageOptions:[10,25,50,100],component:`div`,count:i?.count??0,rowsPerPage:n.page_size??10,page:(n.page??1)-1,onPageChange:x,onRowsPerPageChange:S})]})})}var N=M;function P(){return(0,A.jsx)(D.Suspense,{fallback:(0,A.jsx)(`div`,{children:`Loading...`}),children:(0,A.jsx)(i,{maxWidth:`xl`,sx:{py:4},children:(0,A.jsx)(N,{})})})}export{P as TablePage};