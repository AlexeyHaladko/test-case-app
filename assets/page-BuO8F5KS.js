import{F as e,L as t,S as n,T as r,g as i,p as a,w as o}from"./mui-6TiAU9Pq.js";import{a as s,c,i as l,n as u,o as d,r as f,s as p,t as m}from"./vendor-xQZBn1hS.js";import{n as h,t as g}from"./tanstack-a0KEQ1Fg.js";import{n as _,o as v,r as y}from"./index-BdKMxigo.js";import{t as b}from"./generated.schemas-CmnXDYcV.js";import{n as x,t as S}from"./form-field-C0DSM4KJ.js";var C=async e=>await v(y.createCrop,e);function w(e={}){return h({mutationFn:C,...e})}var T=w;let E=function(e){return e.contact_method=`contact_method`,e.full_name=`full_name`,e.phone=`phone`,e.password=`password`,e.age=`age`,e.bio=`bio`,e.email=`email`,e.agree_terms=`agree_terms`,e.country=`country`,e.website=`website`,e}({});const D=d({[E.contact_method]:m(b),[E.full_name]:p().min(3,`Name must be at least 3 characters`),[E.password]:p().min(8,`Password should be at least 8 characters long`).regex(/[a-z]/,`Should contain at least one lowercase letter`).regex(/[A-Z]/,`Should contain at least one uppercase letter`).regex(/[0-9]/,`Should contain at least one digit`),[E.age]:s().int().min(1).max(150).optional(),[E.phone]:p().optional().or(l(``)).refine(e=>!e||/^([+]?[\s0-9]+)?(\d{3}|[(]?[0-9]+[)])?([-]?[\s]?[0-9])+$/.test(e),{message:`Invalid phone number format`}),[E.country]:p().optional(),[E.website]:c().optional().or(l(``)),[E.bio]:p().max(500).optional(),[E.email]:f(`Should be a valid email`),[E.agree_terms]:u().refine(e=>e,{message:`You must agree to terms and conditions`})}).superRefine((e,t)=>{(e[E.contact_method]===b.phone||e[E.contact_method]===b.both)&&!e[E.phone]&&t.addIssue({code:`custom`,message:`Phone is required`,path:[E.phone]})});var O=t(),k=e(),A={[E.full_name]:``,[E.password]:``,[E.phone]:``,[E.age]:void 0,[E.website]:``,[E.country]:``,[E.bio]:``,[E.email]:``,[E.contact_method]:b.email,[E.agree_terms]:!1};function j(){let{showSnackbar:e}=_(),t=g({defaultValues:A,validators:{onChange:D},onSubmit:({value:e})=>{n(e)}}),{mutate:n}=T({onSuccess:()=>{t.reset(A),e(`Form submitted successfully!`,`success`)},onError:t=>{e(t.message||`An error occurred`,`error`)}});return(0,O.useEffect)(()=>{e(`test`,`success`)},[]),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(`form`,{style:{display:`flex`,flexDirection:`column`,width:`100%`,alignItems:`center`},onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await t.handleSubmit()},children:(0,k.jsxs)(a,{spacing:2,sx:{width:`100%`,maxWidth:800},children:[(0,k.jsx)(S,{form:t,name:E.full_name,label:`Full Name`}),(0,k.jsx)(S,{form:t,name:E.email,label:`Email`,type:`email`}),(0,k.jsx)(S,{form:t,name:E.phone,label:`Phone`}),(0,k.jsx)(S,{form:t,name:E.website,label:`Website`,type:`url`}),(0,k.jsx)(S,{form:t,name:E.password,label:`Password`,type:`password`}),(0,k.jsx)(S,{form:t,name:E.age,label:`Age`,type:`number`}),(0,k.jsx)(S,{form:t,name:E.country,label:`Country`}),(0,k.jsx)(S,{form:t,name:E.bio,label:`Bio`,formFieldType:x.textarea}),(0,k.jsx)(S,{form:t,name:E.contact_method,label:`Contact Method`,formFieldType:x.select,children:Object.values(b).map(e=>(0,k.jsx)(i,{value:e,children:e},e))}),(0,k.jsx)(S,{form:t,name:E.agree_terms,label:`Agree Terms`,formFieldType:x.checkbox}),(0,k.jsx)(t.Subscribe,{selector:e=>[e.canSubmit,e.isSubmitting],children:([e,t])=>(0,k.jsx)(o,{type:`submit`,variant:`contained`,disabled:!e,loading:t,children:`Submit Form`})})]})})})}var M=j;function N(){return(0,k.jsx)(O.Suspense,{fallback:(0,k.jsx)(`div`,{children:`Loading...`}),children:(0,k.jsx)(n,{maxWidth:`xl`,sx:{p:1},children:(0,k.jsx)(r,{sx:{display:`flex`,flexDirection:`column`,alignItems:`center`},children:(0,k.jsx)(M,{})})})})}export{N as FormPage};