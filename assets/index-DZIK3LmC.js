const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/page-C1_VqUNZ.js","assets/vendor-CiZrhL1m.js","assets/mui-HQRIiQPc.js","assets/rolldown-runtime-DGruFWvd.js","assets/tanstack-BNeo0mD6.js","assets/generated.schemas-CmnXDYcV.js","assets/page-DiPcf2UC.js","assets/form-field-Y9-nEQCU.js","assets/page-BkPFRvEe.js"])))=>i.map(i=>d[i]);
import{r as e}from"./rolldown-runtime-DGruFWvd.js";import{B as t,D as n,F as r,H as i,I as a,M as o,N as s,O as c,P as l,R as u,S as d,V as f,W as p,b as m,g as ee,h as te,i as ne,j as re,l as ie,n as h,r as g,t as _,x as v,y,z as ae}from"./mui-HQRIiQPc.js";import{_ as b,d as x,f as S,g as C,h as w,l as T,m as oe,p as se,u as E,v as ce}from"./vendor-CiZrhL1m.js";import{a as le,i as D,n as O,o as k,r as A}from"./tanstack-BNeo0mD6.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var j=ce(),M=e(p(),1);const N=`auth_token`,P=()=>localStorage.getItem(N),F=e=>localStorage.setItem(N,e),I=()=>localStorage.removeItem(N);function L(){if(!P())throw w($.LOGIN)}var R=L,z=i();function B({error:e}){return(0,z.jsx)(z.Fragment,{children:e?.message||`Smth went wrong`})}var V=B;const H=T.create({baseURL:`https://backendcase.infodecs.dev/`,headers:{Accept:`application/json, text/plain, */*`}});H.interceptors.request.use(e=>{let t=P();return t&&(e.headers.Authorization=`Bearer ${t}`),e}),H.interceptors.response.use(e=>e,e=>{throw T.isAxiosError(e)&&e.response?.status===401?(localStorage.removeItem(N),e.response.data.error||`Smth With Wrong`):T.isAxiosError(e)?e?.response?.data?.error||`Smth With Wrong`:{message:`Smth Went Wrong `}});const U=async(e,t)=>(await H.get(e,t)).data,W=async(e,t)=>(await H.post(e,t)).data,G={login:`/api/auth/login/`,getUserInfo:`/api/auth/user/`,getTableData:`/api/table/data/`,createCrop:`/api/form/submit/`};var ue=async e=>await W(G.createCrop,e);function de(e={}){return O({mutationFn:ue,...e})}var fe=async e=>await W(G.login,e);function pe(e={}){return O({mutationFn:fe,...e})}const K={userInfo:`user_info_key`,getTableData:`table_data_key`};function q(){let e=P();return A({queryKey:[K.userInfo],queryFn:()=>U(G.getUserInfo),staleTime:1/0,retry:!1,enabled:!!e})}function me(e){let t=P();return A({queryKey:[K.getTableData,e],queryFn:()=>U(G.getTableData,{params:e}),staleTime:0,retry:!1,enabled:!!t})}var J=(0,M.createContext)(void 0);const he=({children:e})=>{let[t,n]=(0,M.useState)(!1),[i,a]=(0,M.useState)(``),[o,s]=(0,M.useState)(`success`),c=(0,M.useCallback)((e,t=`success`)=>{a(e),s(t),n(!0)},[]),l=(e,t)=>{t!==`clickaway`&&n(!1)};return(0,z.jsxs)(J.Provider,{value:{showSnackbar:c},children:[e,(0,z.jsx)(ee,{open:t,autoHideDuration:6e3,onClose:l,anchorOrigin:{vertical:`top`,horizontal:`right`},children:(0,z.jsx)(r,{onClose:l,severity:o,sx:{width:`100%`},children:i})})]})},Y=()=>{let e=(0,M.useContext)(J);if(!e)throw Error(`useSnackbar must be used within a SnackbarProvider`);return e},ge=({children:e})=>{let t=le(),{showSnackbar:n}=Y(),r=C(),i=P(),{data:a,isLoading:o}=q(),{mutate:s,isPending:c}=pe({onSuccess:e=>{t.setQueryData([K.userInfo],e.user),F(e.access)},onError:e=>{n(e,`error`)}}),l={login:s,user:a,logout:()=>{I(),t.setQueryData([K.userInfo],null),r($.LOGIN)},isAuthenticated:!!a&&!!i,userDataLoading:o,loginProcessing:c};return(0,z.jsx)(X.Provider,{value:l,children:e})},X=(0,M.createContext)(null),Z=()=>{let e=(0,M.useContext)(X);if(!e)throw Error(`useAuth must be used within an AuthProvider`);return e},Q=(0,M.createContext)({mode:`light`,toggleColorMode:()=>{}}),_e=()=>(0,M.useContext)(Q);function ve(){let{user:e,logout:t}=Z();return(0,z.jsxs)(te,{direction:`row`,spacing:2,alignItems:`center`,children:[e&&(0,z.jsx)(l,{variant:`body1`,children:e.username}),(0,z.jsx)(re,{variant:`outlined`,size:`small`,onClick:t,children:`Logout`})]})}var ye=ve;function be(){let e=t(),{toggleColorMode:n}=_e();return(0,z.jsx)(a,{sx:{ml:1},onClick:n,color:`inherit`,children:e.palette.mode===`dark`?(0,z.jsx)(h,{}):(0,z.jsx)(g,{})})}var xe=ae(x)(({theme:e})=>({color:`inherit`,textDecoration:`none`,padding:e.spacing(1,2),borderRadius:e.shape.borderRadius,"&.active":{backgroundColor:e.palette.action.selected,fontWeight:`bold`},"&:hover":{backgroundColor:e.palette.action.hover}}));function Se(){let[e,r]=(0,M.useState)(!1),i=ne(t().breakpoints.down(`md`)),c=()=>{r(e=>!e)},l=[{label:`DASHBOARD`,path:$.DASHBOARD},{label:`FORM`,path:$.FORM}],u=(0,z.jsx)(o,{onClick:c,sx:{textAlign:`center`,width:250},children:(0,z.jsx)(d,{children:l.map(e=>(0,z.jsx)(m,{disablePadding:!0,children:(0,z.jsx)(v,{component:x,to:e.path,sx:{textAlign:`center`},children:(0,z.jsx)(y,{primary:e.label})})},e.label))})});return(0,z.jsxs)(s,{position:`static`,color:`default`,elevation:1,children:[(0,z.jsxs)(ie,{children:[i&&(0,z.jsx)(a,{color:`inherit`,"aria-label":`open drawer`,edge:`start`,onClick:c,sx:{mr:2},children:(0,z.jsx)(_,{})}),(0,z.jsx)(o,{sx:{flexGrow:1,display:{xs:`none`,md:`flex`},gap:2},children:l.map(e=>(0,z.jsx)(xe,{to:e.path,children:e.label},e.label))}),(0,z.jsxs)(o,{sx:{display:`flex`,alignItems:`center`,gap:{xs:1,sm:2}},children:[(0,z.jsx)(ye,{}),(0,z.jsx)(be,{})]})]}),(0,z.jsx)(n,{variant:`temporary`,open:e,onClose:c,ModalProps:{keepMounted:!0},sx:{display:{xs:`block`,md:`none`},"& .MuiDrawer-paper":{boxSizing:`border-box`,width:250}},children:u})]})}var Ce=Se;function we(){return(0,z.jsxs)(E,{FallbackComponent:V,children:[(0,z.jsx)(Ce,{}),(0,z.jsx)(S,{})]})}var Te=we;function Ee(){return(0,z.jsx)(o,{sx:{display:`flex`,justifyContent:`center`,alignItems:`center`,minHeight:`100vh`},children:(0,z.jsx)(E,{FallbackComponent:V,children:(0,z.jsx)(S,{})})})}const De=new k,Oe=e=>f({palette:{mode:e,...e===`light`?{primary:{light:`#757ce8`,main:`#3f50b5`,dark:`#002884`,contrastText:`#fff`},secondary:{light:`#ff7961`,main:`#f44336`,dark:`#ba000d`,contrastText:`#000`}}:{primary:{main:`#90caf9`},secondary:{main:`#f48fb1`}}},components:{MuiPaper:{styleOverrides:{root:{boxShadow:e===`light`?`0px 2px 8px rgba(103, 58, 183, 0.3)`:`0px 2px 8px rgba(0, 0, 0, 0.5)`}}}}});function ke(){let[e,t]=(0,M.useState)(`light`),n=(0,M.useMemo)(()=>({mode:e,toggleColorMode:()=>{t(e=>e===`light`?`dark`:`light`)}}),[e]),r=(0,M.useMemo)(()=>Oe(e),[e]);return(0,z.jsx)(D,{client:De,children:(0,z.jsx)(Q.Provider,{value:n,children:(0,z.jsx)(u,{theme:r,children:(0,z.jsxs)(E,{FallbackComponent:V,children:[(0,z.jsx)(c,{}),(0,z.jsx)(he,{children:(0,z.jsx)(ge,{children:(0,z.jsx)(S,{})})})]})})})})}var Ae=ke,je=()=>(0,z.jsxs)(o,{children:[(0,z.jsx)(l,{children:`404 Error`}),(0,z.jsx)(l,{children:`Page Not Found`}),(0,z.jsx)(l,{children:`The page you are looking for does not exist.`})]});const $={LOGIN:`login`,DASHBOARD:`dashboard`,FORM:`form`};var Me=(0,M.lazy)(()=>b(()=>import(`./page-C1_VqUNZ.js`),__vite__mapDeps([0,1,2,3,4,5])).then(e=>({default:e.TablePage}))),Ne=(0,M.lazy)(()=>b(()=>import(`./page-DiPcf2UC.js`),__vite__mapDeps([6,1,2,3,4,5,7])).then(e=>({default:e.FormPage}))),Pe=(0,M.lazy)(()=>b(()=>import(`./page-BkPFRvEe.js`),__vite__mapDeps([8,1,2,3,4,7])).then(e=>({default:e.LoginPage}))),Fe=oe([{path:`/test-case-app`,Component:Ae,children:[{Component:Ee,children:[{path:$.LOGIN,Component:Pe}]},{Component:Te,middleware:[R],children:[{index:!0,loader:()=>w($.DASHBOARD)},{path:$.DASHBOARD,Component:Me},{path:$.FORM,Component:Ne}]},{path:`*`,Component:je}]}]);(0,j.createRoot)(document.getElementById(`root`)).render((0,z.jsx)(M.StrictMode,{children:(0,z.jsx)(se,{router:Fe})}));export{de as a,me as i,Z as n,Y as r,$ as t};