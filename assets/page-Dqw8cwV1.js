import{C as e,E as t,H as n,L as r,M as i,P as a,W as o,_ as s,a as c,c as l,d as u,f as d,h as f,k as p,l as m,m as h,o as g,p as _,s as v,u as y,v as b}from"./mui-HQRIiQPc.js";import"./vendor-tjROAhpm.js";import"./tanstack-BNeo0mD6.js";import{i as x}from"./index-CuD9hMxJ.js";import{n as S}from"./generated.schemas-CmnXDYcV.js";var C=o(),w=n();function T({tableParams:n,handleFilterChange:r}){return(0,w.jsxs)(f,{direction:`row`,spacing:2,sx:{mb:2},children:[(0,w.jsx)(c,{label:`Filter by Crop`,variant:`outlined`,size:`small`,value:n.crop_name||``,onChange:r(`crop_name`)}),(0,w.jsx)(c,{label:`Filter by Country`,variant:`outlined`,size:`small`,value:n.country||``,onChange:r(`country`)}),(0,w.jsxs)(t,{size:`small`,sx:{minWidth:150},children:[(0,w.jsx)(e,{children:`Status`}),(0,w.jsxs)(s,{value:n.status||``,label:`Status`,onChange:r(`status`),children:[(0,w.jsx)(b,{value:``,children:(0,w.jsx)(`em`,{children:`None`})}),Object.values(S).map(e=>(0,w.jsx)(b,{value:e,children:e},e))]})]})]})}var E=T;const D=[{field:`id`,headerName:`ID`,sortable:!0},{field:`crop_name`,headerName:`Crop`,sortable:!0},{field:`variety`,headerName:`Variety`,sortable:!0},{field:`region`,headerName:`Region`,sortable:!0},{field:`country`,headerName:`Country`,sortable:!0},{field:`status`,headerName:`Status`,sortable:!0},{field:`planting_date`,headerName:`Planting Date`,sortable:!0},{field:`yield_amount`,headerName:`Yield (kg/ha)`,sortable:!0}];function O({tableParams:e,handleSortingChange:t}){return(0,w.jsx)(y,{children:(0,w.jsx)(v,{children:D.map(n=>(0,w.jsx)(d,{children:(0,w.jsx)(g,{active:e.ordering?.includes(n.field),direction:e.ordering===n.field?`asc`:`desc`,onClick:()=>t(n.field),children:n.headerName})},n.field))})})}var k=O;function A(){let[e,t]=(0,C.useState)({page:1,page_size:10}),{data:n}=x(e);return(0,w.jsx)(i,{sx:{width:`100%`},children:(0,w.jsxs)(r,{sx:{width:`100%`,mb:2,p:2},children:[(0,w.jsx)(E,{tableParams:e,handleFilterChange:e=>n=>{t(t=>({...t,[e]:n.target.value,page:1}))}}),(0,w.jsx)(m,{sx:{pl:{sm:2},pr:{xs:1,sm:1}},children:(0,w.jsx)(a,{sx:{flex:`1 1 100%`},variant:`h6`,id:`tableTitle`,component:`div`,children:`Table`})}),(0,w.jsx)(u,{children:(0,w.jsxs)(h,{children:[(0,w.jsx)(k,{tableParams:e,handleSortingChange:n=>{e.ordering===n?t(e=>({...e,ordering:`_${n}`})):t(e=>({...e,ordering:n}))}}),(0,w.jsx)(_,{children:n?.results.map(e=>(0,w.jsxs)(v,{children:[(0,w.jsx)(d,{children:e.id}),(0,w.jsx)(d,{children:e.crop_name}),(0,w.jsx)(d,{children:e.variety}),(0,w.jsx)(d,{children:e.region}),(0,w.jsx)(d,{children:e.country}),(0,w.jsx)(d,{children:e.status}),(0,w.jsx)(d,{children:e.planting_date}),(0,w.jsx)(d,{children:e.yield_amount})]},e.id))})]})}),(0,w.jsx)(l,{rowsPerPageOptions:[10,25,50,100],component:`div`,count:n?.count??0,rowsPerPage:e.page_size??10,page:(e.page??1)-1,onPageChange:(e,n)=>{t(e=>({...e,page:n+1}))},onRowsPerPageChange:e=>{t(t=>({...t,page_size:parseInt(e.target.value,10),page:1}))}})]})})}function j(){return(0,w.jsx)(C.Suspense,{fallback:(0,w.jsx)(`div`,{children:`Loading...`}),children:(0,w.jsx)(p,{maxWidth:`xl`,sx:{py:4},children:(0,w.jsx)(A,{})})})}export{j as TablePage};